# T-Rex Runner

У цьому етапі ми реалізуємо гравця, його стрибок та анімацію. Почнемо з того, що розширимо базовий клас спрайтів, створивши клас для анімованих персонажів. Це будуть гравець та деякі вороги.

## Клас `AnimatedSprite`

Щоб створити анімацію для персонажа, ми використовуємо клас `AnimatedSprite`, який успадковує властивості базового класу `GameSprite`. Клас `AnimatedSprite` дозволяє керувати зміною кадрів для анімованого об'єкта. Ось як виглядає його реалізація:

```python
class AnimatedSprite(GameSprite):
    def __init__(self, images, x, y, width, height):
        super().__init__(images[0], x, y, width, height)
        # Завантажуємо та масштабуємо всі зображення для анімації
        self.images = [transform.scale(image.load(img), (width, height)) for img in images]
        self.current_image = 0
        self.animation_speed = 0.1  # Визначає швидкість анімації

    def do_animate(self):
        # Змінюємо поточний кадр для створення ефекту анімації
        self.current_image += self.animation_speed
        if self.current_image >= len(self.images):
            self.current_image = 0
        self.image = self.images[int(self.current_image)]
```

### Як це працює:
- **`__init__` метод**: приймає список зображень (`images`), які використовуються для анімації персонажа. Кожне зображення масштабується до заданих розмірів.
- **`do_animate` метод**: керує зміною кадрів, поступово збільшуючи значення `current_image`. Коли значення досягає кінця списку кадрів, воно скидається до `0`, щоб почати анімацію заново. Таким чином створюється плавна петля анімації.

Тепер ми можемо створити список кадрів для анімації гравця та створити самого гравця:

```python
player_images = ['img/dino_run_1.png', 'img/dino_run_2.png']
player = AnimatedSprite(player_images, 50, 340, 80, 100)
```

## Реалізація стрибка гравця

Щоб додати можливість стрибка для нашого гравця, необхідно врахувати кілька фізичних аспектів, таких як початкова швидкість, гравітація та зміна вертикального положення персонажа.

### Змінні для стрибка

- **`jump`**: Булева змінна, яка вказує, чи гравець зараз у процесі стрибка. Спочатку встановлена в `False`, оскільки динозавр знаходиться на землі і не стрибає. Коли гравець починає стрибок (натискає пробіл), значення змінюється на `True`.

- **`jump_speed`**: Змінна, яка визначає початкову швидкість стрибка. Вона визначає, наскільки високо гравець стрибне. Більше значення означає вищий стрибок. У цьому випадку встановлено значення `20`, що забезпечує певну силу підйому вгору.

- **`gravity`**: Змінна, яка визначає силу тяжіння, що діє на гравця під час стрибка. Вона поступово збільшує швидкість падіння динозавра назад на землю. Значення `1` означає, що гравець поступово втрачає висоту і повертається на землю під впливом гравітації.

- **`y_velocity`**: Змінна, яка представляє вертикальну швидкість гравця. Спочатку встановлена на `0`, але під час стрибка змінюється на від'ємне значення `jump_speed`, щоб підняти гравця вгору. Після цього вона поступово збільшується під впливом `gravity`, що приводить до падіння назад.

```python
jump = False
jump_speed = 20
gravity = 1
y_velocity = 0
```

### Обробка стрибка в ігровому циклі

В ігровому циклі потрібно відстежувати натискання пробілу для ініціації стрибка. Коли гравець натискає пробіл, ми змінюємо стан стрибка на `True` і встановлюємо початкову вертикальну швидкість:

```python
for e in event.get():
    if e.type == QUIT:
        game = False
    if e.type == KEYDOWN:
        if e.key == K_SPACE and not jump:
            jump = True
            y_velocity = -jump_speed
```

Після цього вертикальна швидкість поступово змінюється під впливом гравітації, що створює реалістичний ефект підйому і падіння.

## Додавання анімації гравця

Щоб зробити гру більш динамічною, ми додаємо анімацію персонажа під час руху. Якщо гравець не стрибає, ми викликаємо метод `do_animate()`, щоб змінювати кадри анімації та створювати ефект бігу:

```python
if not jump:
    player.do_animate()
player.reset()
```

Метод `reset()` відповідає за відображення гравця на екрані. Завдяки цьому персонаж під час бігу виглядає живим, оскільки його кадри змінюються, створюючи плавну анімацію.

Таким чином, ми реалізували анімацію гравця та його стрибок, що робить гру більш динамічною та цікавою. Стрибок динамічно реагує на силу тяжіння, а біг персонажа виглядає природньо завдяки зміні кадрів. Це додає грі більше інтерактивності та робить її приємнішою для користувача.